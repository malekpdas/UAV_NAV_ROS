# Global Launch File for UAV Navigation Stack
# ============================================
# Launches all UAV components:
# - IMU (BNO085)
# - GPS (ZOE-M8Q)
# - EKF State Estimator
# - RC Control Input
# - Servo/ESC Control Output

launch:
  # ============================================================
  # Sensors
  # ============================================================
  - node:
      pkg: sensors
      exec: imu_bno085
      name: imu_bno085
      output: log
      param:
        - from: $(find-pkg-share sensors)/config/imu_bno085.yaml

  - node:
      pkg: sensors
      exec: gps_zoe_m8q
      name: gps_zoe_m8q
      output: log
      param:
        - from: $(find-pkg-share sensors)/config/gps_zoe_m8q.yaml

  # ============================================================
  # State Estimation
  # ============================================================
  - timer:
      period: 2.0
      children:
        - node:
            pkg: sensor_fusion
            exec: sensor_fusion
            name: sensor_fusion
            output: log
            param:
              - from: $(find-pkg-share sensor_fusion)/config/sensor_fusion.yaml

  # ============================================================
  # Control
  # ============================================================
  - node:
      pkg: rc_control
      exec: rc_control
      name: rc_control
      output: log
      param:
        - from: $(find-pkg-share rc_control)/config/rc_control.yaml

  - timer:
      period: 1.0
      children:
        - node:
            pkg: servo_control
            exec: servo_control
            name: servo_control
            output: log
            param:
              - from: $(find-pkg-share servo_control)/config/servo_control.yaml
